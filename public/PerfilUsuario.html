<!doctype html>
<html lang="es">

<head>
  <link href="PerfilUsuario.css" rel="stylesheet" type="text/css" />
  <title>Grupo + Limpio</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Enlaces de Bootstrap y jQuery -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <!-- Otros enlaces -->
  <link rel="stylesheet" href="menu.css">
  <link rel="stylesheet" href="carrusel.css">
  <link rel="stylesheet" href="cards.css">
  <link rel="stylesheet" href="footer.css">
  <link rel="stylesheet" href="destacados.css">
  <link rel="stylesheet" href="marcas.css">
  <link rel="stylesheet" href="info.css">
  <link rel="stylesheet" href="btn.css">
  <link rel="stylesheet" href="catalago.css">
  <link rel="stylesheet" href="Proceso de pago/Estilos/Barra.css" type="text/css" />
  <link rel="stylesheet" href="Proceso de pago/Estilos/Informacion.css" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
  <link rel="icon" href="img/logo1.png">
</head>


<body onload="CargarDatos(); actualizarCantidadProductosEnCarrito(); loggedIn();">
  <div id="loader" class="loader">
    <div class="spinner"></div>
  </div>
  <header class="bg-white">
    <nav class="flex justify-between items-center w-[92%]  mx-auto">
      <div>
        <a href="index.html">
          <img class="w-32 cursor-pointer" src="img/logo.png" alt="Logo">
        </a>
      </div>
      <div
        class="nav-links duration-500 md:static absolute bg-white md:min-h-fit min-h-[60vh] left-0 top-[-100%] md:w-auto w-full flex items-center px-5">
        <ul class="flex md:flex-row flex-col md:items-center md:gap-[4vw] gap-8">
          <li>
            <a class="menu-link" href="index.html">Inicio</a>
          </li>
          <li>
            <a class="menu-link" href="catalogo.html">Catálogo</a>
          </li>
          <li>
            <a class="menu-link" href="servicios.html">Servicios</a>
          </li>
          <li>
            <a class="menu-link" href="about.html">Sobre Nosotros</a>
          </li>
          <li>
            <a class="menu-link" href="#" onclick="mostrarCarrito()">
              <ion-icon name="cart" class="text-black text-xl"></ion-icon>Carrito
              <span id="cantidadCarrito" class="badge badge-danger ml-1">0</span>
            </a>
          </li>
          <!-- Panel del carrito de compras -->
          <div id="carritoPanel" class="carrito-panel">
              <!-- Dentro del HTML del panel del carrito -->
              <div class="carrito-header">
                  <h3>Carrito de compras</h3>
                  <ion-icon name="close-circle" onclick="ocultarCarrito()"></ion-icon>
              </div>

              <div id="productosCarrito" class="productos-carrito">
                  <!-- Aquí se mostrarán los productos en el carrito -->
              </div>
              <div class="carrito-footer">
                  <p>Total a pagar: <span id="totalPagar">LPS.0</span></p>
                  <button class="botonCarrito" onclick="realizarCompra()">Realizar compra</button>
              </div>
          </div>
          <li class="search-container">
            <form action="catalogo.html" method="get">
              <input name="nombre" class="search-bar" type="text" placeholder="Buscar...">
              <button type="submit" class="search-button"><ion-icon name="search"
                  class="search-icon"></ion-icon></button>
            </form>
            <script>document.querySelector('form').addEventListener('submit', function (event) {
                event.preventDefault(); // Prevenir la recarga de la página
                var busqueda = document.querySelector('.search-bar').value;

                // Redirigir al usuario a catalogo.html con la búsqueda como parámetro de la URL
                window.location.href = 'catalogo.html?nombre=' + encodeURIComponent(busqueda);
              });
            </script>
          </li>
        </ul>
      </div>
      <div class="flex items-center gap-6">
          <a id="LogInMenuButton" class="bg-[#23c01e] text-white px-5 py-2 rounded-full hover:bg-[#1abc9c]" href="#">Iniciar
              Sesion</a>
          <ion-icon onclick="onToggleMenu(this)" name="menu" class="text-3xl cursor-pointer md:hidden"></ion-icon>
      </div>
    </nav>
  </header>


  <main>
    <section>
      <div>
        <nav class="my-submenu-nav">
          <a href="catalogo.html?categoria=Baños">Baños</a>
          <a href="catalogo.html?categoria=Lavandería">Lavandería</a>
          <a href="catalogo.html?categoria=Herramientas de limpieza">Herramientas de Limpieza</a>
          <a href="catalogo.html?categoria=Bioseguridad">Bioseguridad</a>
          <a href="catalogo.html?categoria=Desinfectante">Desinfectante</a>
          <a href="catalogo.html?categoria=Cuidado Personal">Cuidado Personal</a>
          <a href="catalogo.html?categoria=Productos Plásticos">Productos Plásticos</a>
          <div class="animation start-home"></div>
        </nav>
      </div>

    </section>
    <section>
      <div class="PUDiv">
        <div class="TituloDiv">
          <img src="./imagenusario.png" class="ImgU" alt="imagen" />
          <span class="Titulo">Perfil de Cliente</span>
        </div>
        <div>
          <div id="ContenidoPU" class="ConPU">
            <nav>
              <div class="navpu" id="nav-tab" role="tablist">
                <button class="btnIP" id="navbtnIP" data-bs-toggle="tab" data-bs-target="#nav-home" type="button"
                  role="tab" aria-controls="nav-IP" aria-selected="true">Info Personal</button>
                <button class="btnMD" id="navbtnMD" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button"
                  role="tab" aria-controls="nav-MD" aria-selected="false">Direccion</button>
                <button class="btnMD" id="navbtnTC" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button"
                  role="tab" aria-controls="nav-TC" aria-selected="false">Tajeta de Credito</button>
                <button class="btnMD" id="navbtnH" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button"
                  role="tab" aria-controls="nav-TC" aria-selected="false">Historial</button>
                <button class="btnS" id="navbtnS" data-bs-toggle="tab" data-bs-target="#nav-disabled" type="button"
                  role="tab" aria-controls="nav-S" aria-selected="false">Seguridad</button>
                <button class="btnLO" id="navbtnLO" data-bs-toggle="tab" data-bs-target="#nav-disabled" type="button"
                  role="tab" aria-controls="nav-S" aria-selected="false">Cerrar Sesion</button>
              </div>
            </nav>
            <div id="IDDivIP" class="DivIP">
              <link href="InfoPersonal.css" rel="stylesheet" type="text/css" />
              <div class="SubDivIp2">
                <span>Informacion Personal</span>
              </div>
              <div class="SubDivIp">
                <span>Nombre</span>
                <span>Apellido</span>
                <span></span>
              </div>
              <div class="SubDivIp3">
                <input id="NombreInput" class="InputIP" type="text" onkeyup="validate();" />
                <input id="ApellidoInput" class="InputIP" type="text" onkeyup="validate2();" />
                <span></span>
              </div>
              <div class="SubDivIp">
                <span>Correo Electronico</span>
                <span>Numero de Telefono</span>
                <span></span>
              </div>
              <div class="SubDivIp3">
                <input id="CorreoInput" class="InputIP" placeholder="ejemplo@correo.com" type="text"
                  style="opacity: 0.5;" disabled />
                <input id="TelefonoInput" class="InputIP" placeholder="XXXXXXXX" type="text" onkeyup="validate4();"
                  maxlength="8" />
                <span></span>
              </div>
              <div class="SubDivIp">
                <span>Fecha de Nacimiento</span>
                <span>Numero de Identidad</span>
                <span></span>
              </div>
              <div class="SubDivIp3">
                <input id="NacimientoInput" class="InputIP" placeholder="DD/MM/AAAA" type="date"
                  pattern="\d{2}/\d{2}/\d{4}" />
                <input id="IdentidadInput" class="InputIP" placeholder="XXXXXXXXXXXXX" type="text"
                  onkeyup="validate3();" maxlength="13" />
                <span></span>
              </div>
              <div class="SubDivIp">
                <span>Genero</span>
                <span></span>
                <span></span>
              </div>
              <div class="SubDivIp3">
                <select id="GeneroSelect" class="InputIP">
                  <option value="masculino">Masculino</option>
                  <option value="femenino">Femenino</option>
                </select>
                <span></span>
                <span></span>
              </div>
              <div class="SubDivIpBtn">
                <button id="Guardarbtn" class="BtnIpEditar"> Guardar Cambios </button>
              </div>
            </div>

            <div id="IDDivMD" class="DivMD">
              <link href="MiDireccion.css" rel="stylesheet" type="text/css" />
              <div class="SubDivMD">
                <span>Mi Direccion</span>
              </div>
              <div class="SubDivMD2">
                <span>Ciudad</span>
                <span>Direccion</span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <input id="CiudadInput" class="InputMD" type="text" onkeyup="validate5();" />
                <input id="DireccionInput" class="InputMD" type="text" />
                <span></span>
              </div>
              <div class="SubDivMD2">
                <span>Estado</span>
                <span>Codigo Postal</span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <input id="EstadoInput" class="InputMD" type="text" onkeyup="validate7();"/>
                <input id="PostalInput" class="InputMD" type="text" onkeyup="validate6();" maxlength="5"/>
                <span></span>
              </div>
              <div class="SubDivMdBtn">
                <button id="Guardarbtn2" class="BtnMdEditar">Guardar Cambios</button>
              </div>
            </div>

            <div id="IDDivTC" class="DivTC">
              <link href="MiDireccion.css" rel="stylesheet" type="text/css" />
              <div class="SubDivMD">
                <span>Tarjeta</span>
              </div>
              <div class="SubDivMD2">
                <span>Nombre de Tarjeta</span>
                <span>Numero de Tarjeta</span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <input id="NomTarjetaInput" class="InputMD" type="text" onkeyup="validate8();"/>
                <input id="NumTarjetaInput" class="InputMD" type="text" onkeyup="validate9();" maxlength="16"/>
                <span></span>
              </div>
              <div class="SubDivMD2">
                <span>Fecha de Expiracion</span>
                <span>Codigo de Seguridad</span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <input id="FechaExpInput" class="InputMD" type="text" placeholder="MM/AA" onkeyup="validate11();" maxlength="5"/>
                <input id="CodSeguridadInput" class="InputMD" type="text" onkeyup="validate10();" maxlength="3"/>
                <span></span>
              </div>
              <div class="SubDivMD2">
                <span>Tipo de Tarjeta</span>
                <span></span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <select id="TarjetaSelect" class="InputIP">
                  <option value=""></option>
                  <option value="visa">Visa</option>
                  <option value="mastercard">Mastercard</option>
                </select>
                <span></span>
                <span></span>
              </div>
              <div class="SubDivMdBtn">
                <button id="Guardarbtn3" class="BtnMdEditar">Guardar Cambios</button>
              </div>
            </div>

            <div id="IDDivH" class="DivH">
              <link href="MiDireccion.css" rel="stylesheet" type="text/css" />
              <div class="SubDivMD">
                <span>Historial</span>
              </div>
              <div class="SubDivMD2">
                <span>Factura</span>
                <span></span>
                <span></span>
              </div>
              <div class="SubDivMD3">
                <select id="FacturaSelect" class="InputIP">
                </select>
                <span></span>
              </div>
              <div class="product-table">
                <table>
                    <thead>
                        <tr>
                            <th>Imagen</th>
                            <th>Producto</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Total</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="product-table">
                        <!-- Aquí se generarán dinámicamente los productos -->
                    </tbody>
                </table>
              </div>
              <!-- <div class="details">
                <h2 class="detalles">Detalles</h2>
                <p>Total: <span id="totalHC">L 0.00</span></p>
              </div> -->
            </div>

            <div id="IDDivS2" class="DivS">
              <link href="Seguridad.css" rel="stylesheet" type="text/css" />
              <div class="SubDivS">
                <span>Seguridad</span>
              </div>
              <div class="SubDivSBtn">
                <button id="BtnSEditar2" class="BtnSEditar">Cambiar Contraseña</button>
              </div>
            </div>

            <div id="IDDivS" class="DivS2">
              <link href="Seguridad.css" rel="stylesheet" type="text/css" />
              <div class="SubDivS">
                <span>Seguridad</span>
              </div>
              <div class="SubDivS2">
                <span>Ingrese la contraseña actual</span>
              </div>
              <div class="SubDivS3">
                <input id="C1Input" class="InputS" type="password" />
              </div>
              <div class="checkboxS">
                <input type="checkbox" onclick="mostrarcontra1()">Mostrar</input>
              </div>
              <div class="SubDivS2">
                <span>Ingrese la contraseña nueva</span>
              </div>
              <div class="SubDivS3">
                <input id="C2Input" class="InputS" type="password" />
              </div>
              <div class="checkboxS">
                <input type="checkbox" onclick="mostrarcontra2()">Mostrar</input>
              </div>
              <div class="SubDivSBtn">
                <button id="BtnSEditar1" class="BtnSEditar">Guardar Contraseña</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <section>
        <button id="scrollToTopBtn" onclick="scrollToTop()">
          <i class="fa fa-arrow-up"></i>
        </button>
      </section>
    </section>

    <script>
      const boton1 = document.getElementById('navbtnIP');
      const boton2 = document.getElementById('navbtnMD');
      const boton3 = document.getElementById('navbtnS');
      const boton6 = document.getElementById('navbtnTC');
      const boton7 = document.getElementById('navbtnH');
      const boton4 = document.getElementById('BtnSEditar2');
      const boton5 = document.getElementById('BtnSEditar1');
      const div1 = document.getElementById('IDDivIP');
      const div2 = document.getElementById('IDDivMD');
      const div3 = document.getElementById('IDDivS');
      const div4 = document.getElementById('IDDivS2');
      const div5 = document.getElementById('IDDivTC');
      const div6 = document.getElementById('IDDivH');

      function changeContent1() {
        div1.style.display = "block"
        div2.style.display = "none"
        div3.style.display = "none"
        div4.style.display = "none"
        div5.style.display = "none"
        div6.style.display = "none"
      }

      function changeContent2() {
        div1.style.display = "none"
        div2.style.display = "block"
        div3.style.display = "none"
        div4.style.display = "none"
        div5.style.display = "none"
        div6.style.display = "none"
      }

      function changeContent3() {
        div1.style.display = "none"
        div2.style.display = "none"
        div3.style.display = "none"
        div4.style.display = "block"
        div5.style.display = "none"
        div6.style.display = "none"
      }

      function changeContent4() {
        div4.style.display = "none"
        div3.style.display = "block"
      }

      function changeContent5() {
        div3.style.display = "none"
        div4.style.display = "block"
      }

      function changeContent6() {
        div1.style.display = "none"
        div2.style.display = "none"
        div3.style.display = "none"
        div4.style.display = "none"
        div5.style.display = "block"
        div6.style.display = "none"
      }

      function changeContent7() {
        div1.style.display = "none"
        div2.style.display = "none"
        div3.style.display = "none"
        div4.style.display = "none"
        div5.style.display = "none"
        div6.style.display = "block"
      }

      function mostrarcontra1() {
        var x = document.getElementById("C1Input");
        if (x.type === "password") {
          x.type = "text";
        } else {
          x.type = "password";
        }
      }

      function mostrarcontra2() {
        var x = document.getElementById("C2Input");
        if (x.type === "password") {
          x.type = "text";
        } else {
          x.type = "password";
        }
      }

      boton1.addEventListener('click', changeContent1);
      boton2.addEventListener('click', changeContent2);
      boton3.addEventListener('click', changeContent3);
      boton4.addEventListener('click', changeContent4);
      boton5.addEventListener('click', changeContent5);
      boton6.addEventListener('click', changeContent6);
      boton7.addEventListener('click', changeContent7);
    </script>


  </main>

  <footer>
    <section class="footer">
      <div class="footer-row">
        <div class="footer-col">
          <h4>Conocenos</h4>
          <ul class="links">
            <li><a href="#">Acerca de Nosotros</a></li>
            <li><a href="#">Historia</a></li>
            <li><a href="#">Marcas</a></li>
            <li><a href="#">Catálogo en línea</a></li>
            <li><a href="#">Promociones</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Información </h4>
          <ul class="links">
            <li><a href="#">Formas de pago</a></li>
            <li><a href="#">Productos nuevos</a></li>
            <li><a href="PreguntasFrecCliente.html">Preguntas frecuentes</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Legal</h4>
          <ul class="links">
            <li><a href="Politicas.html">Politicas de seguridad</a></li>
            <li><a href="#">Envios</a></li>
            <li><a href="#">Pagos</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Contacto</h4>
          <ul class="links">
            <li><a href="Contactarse.html">Contactar</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-row" style="display: flex; align-items: center; justify-content: center;">
        <div class="footer-col" style="text-align: center; margin-top: 20px; color: #fff;">
          Derechos reservados © 2023 | Grupo + Limpio
          <div class="icons">
            <a href="https://www.facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.tiktok.com" target="_blank"><i class="fab fa-tiktok"></i></a>
            <a href="https://www.whatsapp.com" target="_blank"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </div>
    </section>
  </footer>

  <script>
    const getBtnC = document.getElementById('BtnSEditar1');
    const getBtn = document.getElementById('Guardarbtn');
    const getBtn2 = document.getElementById('Guardarbtn2');
    const getBtn3 = document.getElementById('Guardarbtn3');
    const getBtnLO = document.getElementById('navbtnLO');
    const getNombre = document.getElementById("NombreInput");
    const getApellido = document.getElementById("ApellidoInput");
    const getCorreo = document.getElementById("CorreoInput");
    const getTelefono = document.getElementById("TelefonoInput");
    const getNacimiento = document.getElementById("NacimientoInput");
    const getId = document.getElementById("IdentidadInput");
    const getGenero = document.getElementById("GeneroSelect");
    const getCiudad = document.getElementById("CiudadInput");
    const getDireccion = document.getElementById("DireccionInput");
    const getNuevaContra = document.getElementById("C2Input");
    const getEstado = document.getElementById("EstadoInput");
    const getPostal = document.getElementById("PostalInput");
    const getNomTarjeta = document.getElementById("NomTarjetaInput");
    const getNumTarjeta = document.getElementById("NumTarjetaInput");
    const getFechaExp = document.getElementById("FechaExpInput");
    const getCodSeguridad = document.getElementById("CodSeguridadInput");
    const getTipoTarjeta = document.getElementById("TarjetaSelect");
    const getFactura = document.getElementById("FacturaSelect");

    getBtn.addEventListener('click', validar3);
    getBtn2.addEventListener('click', validar3);
    getBtn3.addEventListener('click', validar3);
    getBtnC.addEventListener('click', BuscarContra);
    getBtnLO.addEventListener('click', CerrarSesion);
    getFactura.addEventListener('change', CargarHistorial2);

    const baseUrl = 'http://localhost:3001';

    function CerrarSesion() {
      fetch(baseUrl + '/logOut', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
        },
      })
        .then(response => response.json())
        .then(data => {
          if (data.msg == "log out") {
            alert('Se ha cerrrado sesion');
            window.location.href = "index.html";
            localStorage.removeItem('correo');
            localStorage.removeItem('usuario');
          } else {

          }
        })
        .catch(error => {
          alert('No se ha podido cerrar sesion');
        });
    }

    function Actualizar() {
      fetch(baseUrl + '/Actualizar', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          nombre: getNombre.value, apellido: getApellido.value, id: getId.value, telefono: getTelefono.value,
          ciudad: getCiudad.value, correo: getCorreo.value, fechanacimiento: getNacimiento.value, genero: getGenero.value, direccion: getDireccion.value,
          estado: getEstado.value, postal: getPostal.value, nomtarjeta: getNomTarjeta.value, numtarjeta: getNumTarjeta.value, fechaexp: getFechaExp.value,
          codseguridad: getCodSeguridad.value, tipotarjeta: getTipoTarjeta.value,
        }),
      })
        .then(response => response.json())
        .then(data => {
          alert('Su informacion a sido actualizada exitosamente!');
          window.location.reload();
        })
        .catch(error => {
          alert('No se ha podido actualizar su informacion');
        });
    }

    function NuevaContra() {
      fetch(baseUrl + '/updatePassword', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ correo: getCorreo.value, password: getNuevaContra.value }),
      })
        .then(response => response.json())
        .then(data => {
          alert('Contraseña Actualizada!');
          window.location.reload();
        })
        .catch(error => {
          alert('No se ha podido actualizar la contraseña');
        });
    }

    function BuscarContra() {
      fetch(baseUrl + '/ConfirmPassword', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ correo: getCorreo.value }),
      })
        .then(response => response.json())
        .then(data => {
          VerificarContra(data.password);
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Error submitting data' + error);
        });
    }

    function CargarHistorial() {
      fetch(baseUrl + '/selectHistorial', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ correo: getCorreo.value }),
      })
        .then(response => response.json())
        .then(data => {
          document.getElementById('FacturaSelect').innerHTML = "";
          for(var i=0; i<data.length; i++){
            var opt = document.createElement('option');
            opt.value = data[i].id;
            opt.innerHTML = data[i].id;
            document.getElementById('FacturaSelect').appendChild(opt);
          }
          addSampleProducts(data);
        })
        .catch(error => {
          //alert('No se ha podido cerrar sesion');
        });
    }

    function CargarHistorial2() {
      fetch(baseUrl + '/selectHistorial', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ correo: getCorreo.value }),
      })
        .then(response => response.json())
        .then(data => {
          addSampleProducts(data);
        })
        .catch(error => {
          //alert('No se ha podido cerrar sesion');
        });
    }

    function VerificarContra(data) {
      if (document.getElementById("C1Input").value == data) {
        NuevaContra();
      } else {
        alert("Las constraseña no es la correcta");
      }
    }

    function CargarDatos() {
      fetch(baseUrl + '/CargarPerfil', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ id: localStorage["correo"] }),
      })
        .then(response => response.json())
        .then(data => {
          localStorage.setItem('usuario', JSON.stringify(data));
          getNombre.value = data.nombre;
          getApellido.value = data.apellido;
          getCorreo.value = data.correo;
          getTelefono.value = data.telefono;
          getNacimiento.value = data.fechanacimiento;
          getId.value = data.id;
          getGenero.value = data.genero;
          getCiudad.value = data.ciudad;
          getDireccion.value = data.direccion;
          getEstado.value = data.estado;
          getPostal.value = data.postal;
          getNomTarjeta.value = data.nomtarjeta;
          getNumTarjeta.value = data.numtarjeta;
          getFechaExp.value = data.fechaexp;
          getCodSeguridad.value = data.codseguridad;
          getTipoTarjeta.value = data.tipotarjeta;
          CargarHistorial();
        })
        .catch(error => {
          alert('No han podido cargar los datos de su cuenta' + error);
        });
    }

    function validar() {
      if (getId.value.length == 13) {
        validar2();
      } else if (getId.value.length == 0) {
        alert("Debe de llenar el campo de Identidad");
      } else {
        alert("El numero de identidad debe ser de 13 numeros, sin espacios");
      }
    }

    function validar2() {
      if (getTelefono.value.length == 8) {
        validar5();
      } else if (getTelefono.value.length == 0) {
        alert("Debe de llenar el campo de Telefono");
      } else {
        alert("El numero de telefono debe ser de 8 numeros, sin espacios");
      }
    }

    function validar3() {
      if (getNombre.value.length == 0) {
        alert("Debe de llenar el campo de Nombre");
      } else {
        validar4();
      }
    }

    function validar4() {
      if (getApellido.value.length == 0) {
        alert("Debe de llenar el campo de Apellido");
      } else {
        validar();
      }
    }

    function validar5() {
      if (getCiudad.value.length == 0) {
        alert("Debe de llenar el campo de Ciudad");
      } else {
        validar13();
      }
    }

    function validar13(){
      if (getPostal.value.length == 0 && getDireccion.value.length == 0 && getEstado.value.length == 0) {
        Actualizar();
      } else {
        validar14();
      }
    }

    function validar14(){
      if (getDireccion.value.length == 0) {
        alert("Una vez se empieza a llenar los campos de direccion, se debe de llenar el campo de direccion");
      } else {
        validar15();
      }
    }

    function validar15(){
      if (getEstado.value.length == 0) {
        alert("Una vez se empieza a llenar los campos de direccion, se debe de llenar el campo de estado");
      } else {
        validar6();
      }
    }

    function validar6() {
      if (getPostal.value.length == 5) {
        validar7();
      } else {
        alert("El codigo postal debe de tener 5 digitos");
      }
    }

    function validar7() {
      if (getNumTarjeta.value.length == 0 && getNomTarjeta.value.length == 0 && getFechaExp.value.length == 0 &&
      getCodSeguridad.value.length == 0 && getTipoTarjeta.value.length == 0) {
        Actualizar();
      } else {
        validar8();
      }
    }

    function validar8() {
      if (getNomTarjeta.value.length == 0) {
        alert("El campo de nombre no debe estar vacio una vez empezada a llenar los campos de tarjeta");
      } else {
        validar9();
      }
    }

    function validar9() {
      if (getNumTarjeta.value.length == 16) {
        validar10();
      } else {
        alert("La tarjeta de credito debe de tener 16 digitos");
      }
    }

    function validar10() {
      if (getFechaExp.value.length == 5) {
        validar11();
      } else {
        alert("La fecha de expiracion debe ser del tipo MM/AA");
      }
    }

    function validar11() {
      if (getCodSeguridad.value.length == 3) {
        validar12();
      } else {
        alert("El codigo de seguridad debe de tener 3 digitos");
      }
    }

    function validar12() {
      if (getTipoTarjeta.value.length == 0) {
        alert("Debe de seleccionar un tipo de tarjeta una vez se ha empezado a llenar los campos de tarjeta");
      } else {
        Actualizar();
      }
    }

    function validate() {
      var element = document.getElementById('NombreInput');
      element.value = element.value.replace(/[^a-zA-Z ñÑáéíóúÁÉÍÓÚ]+/, '');
    };

    function validate2() {
      var element2 = document.getElementById('ApellidoInput');
      element2.value = element2.value.replace(/[^a-zA-Z ñÑáéíóúÁÉÍÓÚ]+/, '');
    };

    function validate3() {
      var element2 = document.getElementById('IdentidadInput');
      element2.value = element2.value.replace(/[^0-9]+/, '');
    };

    function validate4() {
      var element2 = document.getElementById('TelefonoInput');
      element2.value = element2.value.replace(/[^0-9]+/, '');
    };

    function validate5() {
      var element2 = document.getElementById('CiudadInput');
      element2.value = element2.value.replace(/[^a-zA-Z ñÑáéíóúÁÉÍÓÚ]+/, '');
    };

    function validate6() {
      var element2 = document.getElementById('PostalInput');
      element2.value = element2.value.replace(/[^0-9]+/, '');
    };

    function validate7() {
      var element2 = document.getElementById('EstadoInput');
      element2.value = element2.value.replace(/[^a-zA-Z ñÑáéíóúÁÉÍÓÚ]+/, '');
    };

    function validate8() {
      var element2 = document.getElementById('NomTarjetaInput');
      element2.value = element2.value.replace(/[^a-zA-Z ñÑáéíóúÁÉÍÓÚ]+/, '');
    };

    function validate9() {
      var element2 = document.getElementById('NumTarjetaInput');
      element2.value = element2.value.replace(/[^0-9]+/, '');
    };

    function validate10() {
      var element2 = document.getElementById('CodSeguridadInput');
      element2.value = element2.value.replace(/[^0-9]+/, '');
    };

    function validate11() {
      var element2 = document.getElementById('FechaExpInput');
      element2.value = element2.value.replace(/[^0-9/]+/, '');
    };


    function addSampleProducts(carrito2) {
      var table = document.getElementById("product-table");
      table.innerHTML = "";
      var num = 0;
      for(var i=0; i<carrito2.length; i++){
        if(document.getElementById('FacturaSelect').value == carrito2[i].id){
          num = i;
        }
      }
      //var carrito2 = carritoGuardado2 ? JSON.parse(carritoGuardado2) : [];
      var carrito3 = carrito2[num].compra;

      var percioFinal = 0;

      carrito3.forEach(function (product) {
          var row = table.insertRow();
          var imgCell = row.insertCell(0);
          var img = document.createElement('img');
          img.src = product.imagen;
          img.alt = product.nombre;
          img.style = "height: 60px;"
          imgCell.appendChild(img);

          row.insertCell(1).textContent = product.nombre;
          row.insertCell(2).textContent = product.precio.toFixed(2);
          percioFinal = percioFinal + product.precio.toFixed(2);
          row.insertCell(3).textContent = product.cantidad;

          var total = product.precio * product.cantidad;
          row.insertCell(4).textContent = total.toFixed(2); 
      });
      document.getElementById("totalHC").textContent = precioFinal;
      alert(":D")
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/your-fontawesome-kit.js"></script>
  <script src="menu.js"></script>
  <script src="carrusel.js"></script>
  <script src="menu.js"></script>
  <script src="destacados.js"></script>
  <script src="catalago.js"></script>
  <script src="catalago.css"></script>
  <script src="main.js"></script>
  <script src="btn.js"></script>
  <script type="text/javascript" id="hs-script-loader" async defer src="//js-na1.hs-scripts.com/45137105.js"></script>
</body>

</html>